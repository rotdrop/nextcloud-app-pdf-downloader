/*! For license information please see src_views_FilesTab_vue-cdb0d854a3d443f6d2b2.js.LICENSE.txt */
"use strict";(self.webpackChunkpdf_downloader=self.webpackChunkpdf_downloader||[]).push([["src_views_FilesTab_vue"],{6904:(e,t,o)=>{o.r(t)},4755:(e,o,n)=>{n.r(o),n.d(o,{Vue:()=>s.Ay,default:()=>S});var a=n(9027),s=n(5471),i=n(1777),l=n(1338),r=n(3627),d=n(5810),c=n(9498);var u=n(6333),p=n(5168),h=n(755),f=n(1458),w=n(3334);const m={methods:{unclippedPopup:(e,t)=>({content:e,preventOverflow:!0,html:!0,csstag:["vue-tooltip-unclipped-popup"]})}},g=function(e,t,o){let n=(0,c.Jv)("/apps/"+a.J+"/"+e,t,o);const s={...t};for(const t of e.matchAll(/{([^{}]*)}/g))delete s[t[1]];const i=[];for(const[e,t]of Object.entries(s))try{i.push(e+"="+encodeURIComponent(t.toString()))}catch(e){console.debug("STRING CONVERSION ERROR",e)}return i.length>0&&(n+="?"+i.join("&")),n};var v=n(5845),b=n(4692);const y=n(4692);b&&b!==y&&console.info(a.J+": JQUERY VERSIONS W / A",b.fn.jquery,y.fn.jquery);let D=(0,i.do)()||"";y.ajaxSetup({beforeSend(e){e.setRequestHeader("requesttoken",D)}}),(0,i.zo)((e=>{D=e}));const A=y,N=function(e,t,o){void 0===o&&(o=5);let n="";let a=window.document;const s=function(e,t){let o="";for(let n=0;n<e;n++)o+=t;return o},i=function(e,t,o,n,a){t>0&&t++;const l=s(o*t,n),r=s(o*(t+1),n);let d="";if("object"==typeof e&&null!==e&&e.constructor&&"PHPJS_Resource"!==function(e){const t=/\W*function\s+([\w$]+)\s*\(/.exec(e);return t?t[1]:"(Anonymous)"}(e.constructor)){d+="[object Array]"===Object.prototype.toString.call(e)?"Array\n":"Object\n",d+=l+"(\n";for(const s in e){const l=Object.prototype.toString.call(e[s]);d+=t>a?r+"["+s+"] => "+e[s]+"\n":"[object Array]"===l||"[object Object]"===l?r+"["+s+"] => "+i(e[s],t+1,o,n,a):r+"["+s+"] => "+e[s]+"\n"}d+=l+")\n"}else d=null==e?"":e.toString();return d};if(n=i(e,0,4," "),!0!==t){if(a.body)window.echo(n);else try{a=XULDocument,window.echo('<pre xmlns="http://www.w3.org/1999/xhtml" style="white-space:pre;">'+n+"</pre>")}catch(e){window.echo(n)}return!0}return n};n(6904);const J=function(e){const t=A(e||"body");t.data(a.J+"DialogHandlersAttached")||(t.data(a.J+"DialogHandlersAttached",!0),t.off("dblclick",".oc-dialog").on("dblclick",".oc-dialog",(function(e){A(".oc-dialog").toggleClass("maximize-width"),e.stopImmediatePropagation()})),t.off("click",".oc-dialog .exception.error.name").on("click",".oc-dialog .exception.error.name",(function(e){A(this).next().toggleClass("visible"),e.stopImmediatePropagation()})),t.off("click",".oc-dialog .error.exception ul.technical").on("click",".oc-dialog .error.exception ul.technical",(function(e){A(this).nextAll(".trace").toggleClass("visible"),e.stopImmediatePropagation()})),t.off("click",".oc-dialog .error.exception .trace.visible").on("click",".oc-dialog .error.exception .trace.visible",(function(e){const t=A(this);t.removeClass("visible"),t.next(".trace").removeClass("visible"),t.prev(".trace").removeClass("visible"),e.stopImmediatePropagation()})))},C=(0,c.aU)()||"/",k=(0,v.C)(),P={200:t(a.J,"OK"),201:t(a.J,"Created"),202:t(a.J,"Accepted"),203:t(a.J,"Non-Authoritative Information"),204:t(a.J,"No Content"),205:t(a.J,"Reset Content"),206:t(a.J,"Partial Content"),207:t(a.J,"Multi-Status (WebDAV)"),208:t(a.J,"Already Reported (WebDAV)"),226:t(a.J,"IM Used"),300:t(a.J,"Multiple Choices"),301:t(a.J,"Moved Permanently"),302:t(a.J,"Found"),303:t(a.J,"See Other"),304:t(a.J,"Not Modified"),305:t(a.J,"Use Proxy"),306:t(a.J,"(Unused)"),307:t(a.J,"Temporary Redirect"),308:t(a.J,"Permanent Redirect (experimental)"),400:t(a.J,"Bad Request"),401:t(a.J,"Unauthorized"),402:t(a.J,"Payment Required"),403:t(a.J,"Forbidden"),404:t(a.J,"Not Found"),405:t(a.J,"Method Not Allowed"),406:t(a.J,"Not Acceptable"),407:t(a.J,"Proxy Authentication Required"),408:t(a.J,"Request Timeout"),409:t(a.J,"Conflict"),410:t(a.J,"Gone"),411:t(a.J,"Length Required"),412:t(a.J,"Precondition Failed"),413:t(a.J,"Request Entity Too Large"),414:t(a.J,"Request-URI Too Long"),415:t(a.J,"Unsupported Media Type"),416:t(a.J,"Requested Range Not Satisfiable"),417:t(a.J,"Expectation Failed"),418:t(a.J,"I'm a teapot (RFC 2324)"),420:t(a.J,"Enhance Your Calm (Twitter)"),422:t(a.J,"Unprocessable Entity (WebDAV)"),423:t(a.J,"Locked (WebDAV)"),424:t(a.J,"Failed Dependency (WebDAV)"),425:t(a.J,"Reserved for WebDAV"),426:t(a.J,"Upgrade Required"),428:t(a.J,"Precondition Required"),429:t(a.J,"Too Many Requests"),431:t(a.J,"Request Header Fields Too Large"),444:t(a.J,"No Response (Nginx)"),449:t(a.J,"Retry With (Microsoft)"),450:t(a.J,"Blocked by Windows Parental Controls (Microsoft)"),451:t(a.J,"Unavailable For Legal Reasons"),499:t(a.J,"Client Closed Request (Nginx)"),500:t(a.J,"Internal Server Error"),501:t(a.J,"Not Implemented"),502:t(a.J,"Bad Gateway"),503:t(a.J,"Service Unavailable"),504:t(a.J,"Gateway Timeout"),505:t(a.J,"HTTP Version Not Supported"),506:t(a.J,"Variant Also Negotiates (Experimental)"),507:t(a.J,"Insufficient Storage (WebDAV)"),508:t(a.J,"Loop Detected (WebDAV)"),509:t(a.J,"Bandwidth Limit Exceeded (Apache)"),510:t(a.J,"Not Extended"),511:t(a.J,"Network Authentication Required"),598:t(a.J,"Network read timeout error"),599:t(a.J,"Network connect timeout error"),OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,CONFLICT:409,PRECONDITION_FAILED:412,INTERNAL_SERVER_ERROR:500},T=function(e,o,n,s){const i={cleanup(e){},preProcess(e){}};(s=s||{})instanceof Function&&(s={cleanup:s}),s=A.extend({},i,s);const l=F(e,o,n);let r;switch(s.preProcess(l),o){case"cancelled":r=t(a.J,"Operation cancelled by user.");break;case"abort":r=t(a.J,"Aborted");break;default:r=P[e.status]}const d=t(a.J,"Error");let c='<span class="bold toastify http-status error">'+r+"</span>",u='<a href="mailto:'+encodeURIComponent(k.adminContact)+"?subject=[Error] Error Feedback&body="+encodeURIComponent("JavaScript User Agent:\n"+navigator.userAgent+"\n\nPHP User Agent:\n"+(k.phpUserAgent||"unknown")+"\n\nError Code: "+r+"\n\nError Data: "+N(l,!0)+"\n")+'">'+t(a.J,"System Administrator")+"</a>";switch(e.status){case P.OK:case P.BAD_REQUEST:case P.NOT_FOUND:case P.CONFLICT:case P.PRECONDITION_FAILED:case P.INTERNAL_SERVER_ERROR:{l.error&&P[e.status]!==t(a.J,l.error)&&(c+=': <span class="bold error toastify name">'+t(a.J,l.error)+"</span>");const o=[];l.message&&(Array.isArray(l.message)?o.splice(o.length,0,...l.message):o.push(l.message)),l.messages&&o.splice(o.length,0,...l.messages),l.errorMessages&&o.splice(o.length,0,...l.errorMessages);for(const e of o)c+='<div class="'+a.J+' error toastify">'+e+"</div>";c+='<div class="error toastify feedback-link">'+t(a.J,"Feedback email: {AutoReport}",{AutoReport:u},-1,{escape:!1})+"</div>",u="";let n=l;if(void 0!==n.exception)for(c+='<div class="exception error name"><pre>'+n.exception+'</pre></div><div class="exception error trace"><pre>'+n.trace+"</pre></div>";null!=(n=n.previous);)c+='<div class="bold error toastify">'+n.message+"</div>",c+='<div class="exception error name"><pre>'+n.exception+'</pre></div><div class="exception error trace"><pre>'+n.trace+"</pre></div>";l.info&&(c+='<div class="'+a.J+' error-page">'+l.info+"</div>");break}case P.UNAUTHORIZED:{s.cleanup=function(){window.location.replace(C)};let e=t(a.J,"Something went wrong.");e+="<br/>"+t(a.J,"If it should be the case that you are already logged in for a long time without interacting with the app, then the reason for this error is probably a simple timeout."),e+="<br/>"+t(a.J,"In any case it may help to logoff and logon again, as a temporary workaround. You will be redirected to the login page when you close this window."),c+='<div class="error general">'+e+"</div>";break}}var p,h,f,w,m;return J(),p=c,h=d,f=function(){s.cleanup(l)},w=!0,m=!0,OC.dialogs.message(p,h,"alert",OC.dialogs.OK_BUTTON,f,w,m),l},F=function(e,o,n){if(void 0!==e.parsed&&void 0!==e.error&&void 0!==e.status&&void 0!==e.message)return e;const s=e.getResponseHeader("content-type")||"";let i={error:n,status:o,messages:[t(a.J,"Unknown JSON error response to AJAX call: {status} / {error}",{status:o,error:n})],parsed:!1};if(s.indexOf("html")>-1)console.debug("html response",e,o,n),console.debug(e.status),i.messages=[t(a.J,"HTTP error response to AJAX call: {code} / {error}",{code:e.status,error:n})],i.info=A(e.responseText).find("main").html(),i.parsed=!0;else if(s.indexOf("json")>-1){const t=JSON.parse(e.responseText);i={...i,...t},i.parsed=!0}else console.log("unknown response");return i};A((function(){J()}));var I=n(1164);const O=function(e,o,n){const s={done(e){console.info("DONE downloading",e)},fail(e){},always(){},errorMessage(e,o){const n=(o.messages||[t(a.J,"unknown error")]).join(" | ");return console.info("ERROR",e,o,n),t(a.J,'Unable to download data from "{url}": {message}',{url:e,message:n})}};if("string"==typeof(n=n||{})){const e=n;n={errorMessage:(t,o)=>e}}const i=(n=A.extend({},s,n)).fail;n.fail=function(t){(0,p.Qg)(n.errorMessage(e,t),{timeout:p.DH}),i(t)};const l=o?"POST":"GET";if(o=o||[],!Array.isArray(o)&&"object"==typeof o){const e=[];for(const[t,n]of Object.entries(o))e.push({name:t,value:n});o=e}const r=e.startsWith(c.Jv(""))||e.startsWith(c.dC(""))?e:g(e);return A.ajax({url:r,method:l,cache:!1,data:o,dataType:"binary",xhr(){const e=new XMLHttpRequest;return e.onreadystatechange=function(){2===e.readyState&&(200===e.status?e.responseType="blob":e.responseType="text")},e}}).fail((function(e,t,o){T(e,t,o,n.fail),n.always()})).done((function(e,t,o){let a="download";const s=o.getResponseHeader("Content-Disposition");if(s){a=(0,I.parse)(s).parameters.filename||a}let i=o.getResponseHeader("Content-Type");i=i?i.split(";")[0]:"application/octetstream";const l=new Blob([e],{type:i});if(!!document.documentMode)window.navigator.msSaveBlob(l,a);else{const e=(window.URL||window.webkitURL).createObjectURL(l),t=A("<a />");t.attr("download",a),t.attr("href",e),A("body").append(t),t[0].click(),console.info("DOWNLOAD A",t),A("body").remove(t)}n.done(r,e),n.always()}))};var R=n(5980);const _=(0,v.C)();s.Ay.directive("tooltip",u.m_),s.Ay.mixin({data:()=>({appName:a.J}),methods:{t:w.Tl,n:w.zw}});const x={name:"FilesTab",components:{CloudUpload:h.A,FilePrefixPicker:R.A,NcActionButton:u.Ko,NcActionCheckbox:u.RI,NcActions:u.B6},mixins:[m],data:()=>({fileList:void 0,fileInfo:{},folderName:void 0,config:_,downloads:[],downloadOptions:{offline:void 0,pageLabels:void 0,useTemplate:!0},showCloudDestination:!1,cloudDestinationFileInfo:{dirName:void 0,baseName:void 0},showBackgroundDownloads:!1,activeLoaders:-1,downloading:!1,tooltips:{pageLabels:(0,w.Tl)(a.J,"Decorate each page with the original file name and the page number within that file. The default is configured in the personal preferences for the app."),offline:(0,w.Tl)(a.J,"When converting many or large files to PDF you will encounter timeouts because the request just lasts too long and the web server bails out. If this happens you can schedule offline generation of the PDF. This will not make things faster for you, but the execution time is not constrained by the web server limits. You will be notified when it is ready. If you chose to store the PDF in the cloud file system, then it will just show up there. If you chose to download to you local computer then the download will show up here (and in the notification). The download links have a configurable expiration time."),useTemplate:(0,w.Tl)(a.J,"Auto-generate the download filename from the given template. The default template can be configured in the personal settings for this app.")},personalSettings:{}}),computed:{loading(){return 0!==this.activeLoaders},sourceFileId(){return this.fileInfo?.id},sourcePath(){return this.fileInfo.path+("/"===this.fileInfo.path?"":"/")+this.fileInfo.name},cloudDestinationBaseName:{get(){return this.cloudDestinationFileInfo.baseName},set(e){return(0,s.hZ)(this.cloudDestinationFileInfo,"baseName",e),e}},cloudDestinationDirName:{get(){return this.cloudDestinationFileInfo.dirName},set(e){return(0,s.hZ)(this.cloudDestinationFileInfo,"dirName",e),e}},cloudDestinationPathName(){return this.cloudDestinationDirName+(this.cloudDestinationBaseName?"/"+this.cloudDestinationBaseName:"")}},watch:{showCloudDestination(e){e&&this.$refs.downloadActions.closeMenu()},downloads(e){this.showBackgroundDownloads=e.length>0}},created(){(0,l.B1)("notifications:notification:received",this.onNotification)},mounted(){},methods:{info(){console.info.apply(null,arguments)},setBusySate(){},async update(e){if(this.activeLoaders=1,this.fileInfo=e,this.cloudDestinationDirName=this.config.pdfCloudFolderPath||e.path,"dir"===this.fileInfo.type)this.folderName=e.name;else{const t=r.parse(e.name);this.folderName=r.basename(t.name,".tar")}this.downloadOptions.pageLabels=this.config.pageLabels,this.downloadOptions.offline=this.config.useBackgroundJobsDefault,this.fetchPdfFileNameFromTemplate(this.sourcePath).then((e=>{this.cloudDestinationBaseName=e})),this.refreshAvailableDownloads(),--this.activeLoaders},async getData(){},toggleOptionsMenu(){this.$refs.downloadOptions.opened?this.$refs.downloadOptions.closeMenu():this.$refs.downloadOptions.openMenu()},toggleDownloadMenu(){this.$refs.downloadActions.opened?this.$refs.downloadActions.closeMenu():this.showCloudDestination?this.showCloudDestination=!1:this.$refs.downloadActions.openMenu()},async fetchPdfFileNameFromTemplate(e){++this.activeLoaders;try{const t=await f.Ay.get(g("sample/pdf-filename/{template}/{path}",{template:encodeURIComponent(this.config.pdfFileNameTemplate),path:encodeURIComponent(e)}));return--this.activeLoaders,t.data.pdfFileName}catch(e){let t=(0,w.Tl)(a.J,"reason unknown");if(e.response&&e.response.data){const o=e.response.data;Array.isArray(o.messages)&&(t=o.messages.join(" "))}return(0,p.Qg)((0,w.Tl)(a.J,"Unable to obtain the pdf-file template example: {message}",{message:t}),{timeout:p.DH}),void--this.activeLoaders}},async refreshAvailableDownloads(){const e=await this.fetchAvailableDownloads();this.downloads=e,this.showBackgroundDownloads=e.length>0},async fetchAvailableDownloads(e){!0!==e&&++this.activeLoaders;try{const t=await f.Ay.get(g("list/{sourcePath}",{sourcePath:encodeURIComponent(this.sourcePath)}));return console.info("DOWNLOADS RESPONSE",t),!0!==e&&--this.activeLoaders,t.data}catch(t){let o=(0,w.Tl)(a.J,"reason unknown");if(t.response&&t.response.data){const e=t.response.data;Array.isArray(e.messages)&&(o=e.messages.join(" "))}return(0,p.Qg)((0,w.Tl)(a.J,"Unable to obtain the list of available downloads: {message}",{message:o}),{timeout:p.DH}),!0!==e&&--this.activeLoaders,[]}},downloadUrl(e){const t=this.sourceFileId;return g("download/{sourceFileId}/{cacheId}",{sourceFileId:t,cacheId:e,requesttoken:(0,i.do)()})},async handleCacheFileSave(e){let{dir:t,mode:o}=await new Promise((e=>{OC.dialogs.filepicker((0,w.Tl)(a.J,"Choose a destination"),((t,o)=>e({dir:t,mode:o})),!1,["httpd/unix-directory"],!0,p.bh.CopyMove,this.cloudDestinationDirName,{allowDirectoryChooser:!0})}));if(console.info("PATH AND MODE",t,o),t=t||"/",t.startsWith("//")&&(t=t.slice(1)),await this.handleSaveToCloud(e,t,o===p.bh.Move),o===p.bh.Move){const t=this.downloads.findIndex((t=>t.fileid===e));t>=0?this.downloads.splice(t,1):(console.info("DELETED DOWNLOAD "+e+" HAS VANISHED FROM DATA?",this.downloads),this.fetchAvailableDownloads().then((e=>{this.downloads=e})))}},async handleCacheFileDownload(e){this.downloading=!0,this.setBusySate(!0),O(this.downloadUrl(e),!1,{always:()=>{this.downloading=!1,this.setBusySate(!1)}})},async handleCacheFileDelete(e){this.downloading=!0;try{const t=(await f.Ay.post(g("clean/{sourcePath}/{cacheId}",{sourcePath:encodeURIComponent(this.sourcePath),cacheId:e}))).data;if(Array.isArray(t.messages))for(const e of t.messages)(0,p.Te)(e);const o=this.downloads.findIndex((t=>t.fileid===e));o>=0?this.downloads.splice(o,1):(console.info("DELETED DOWNLOAD "+e+" HAS VANISHED?",this.downloads),this.fetchAvailableDownloads().then((e=>{this.downloads=e})))}catch(e){let t=(0,w.Tl)(a.J,"reason unknown");if(e.response&&e.response.data){const o=e.response.data;Array.isArray(o.messages)&&(t=o.messages.join(" "))}(0,p.Qg)((0,w.Tl)(a.J,"Unable to delete the cached PDF file: {message}",{message:t}),{timeout:p.DH}),this.fetchAvailableDownloads().then((e=>{this.downloads=e}))}this.downloading=!1},onNotification(e){const t=e?.notification;if(t?.app!==a.J)return;const o=t?.subjectRichParameters;if(o.source?.id!==this.sourceFileId)return void console.info("*** PDF generation notification for other file received",this.sourceFileId,o);const n=o?.destination;if(!n)return;if("download"!==n?.status||!n?.file)return void console.info("*** PDF generation notification received, but not for for download.",n);if(!n?.file)return void console.info("*** PDF generation notification received, but carries no file information.",n);console.info("*** PDF download generation event received, updating downloads list",n.file);const s=n.file,i=s.path,l=s.fileid,r=this.downloads.findIndex((e=>e.fileid===l));-1===r&&i?(console.info("*** Adding file to list of available downloads.",s),this.downloads.push(n.file)):r>=0&&!i&&(console.info("*** Removing file from list of available downloads.",s),this.downloads.splice(r,1))},async handleDownload(){this.$refs.downloadActions.closeMenu(),this.showCloudDestination=!1;const e={sourceFileId:this.sourceFileId,sourcePath:encodeURIComponent(this.sourcePath),destinationPath:encodeURIComponent(this.cloudDestinationBaseName)},t={pageLabels:this.downloadOptions.pageLabels,useTemplate:this.downloadOptions.useTemplate};if(this.downloading=!0,this.setBusySate(!0),this.downloadOptions.offline){try{f.Ay.post(g("schedule/download/{sourcePath}/{destinationPath}",e),t),(0,p.Te)((0,w.Tl)(a.J,"Background PDF generation for {sourceFile} has been scheduled.",{sourceFile:this.sourcePath}))}catch(e){let t=(0,w.Tl)(a.J,"reason unknown");if(e.response&&e.response.data){const o=e.response.data;Array.isArray(o.messages)&&(t=o.messages.join(" "))}(0,p.Qg)((0,w.Tl)(a.J,"Unable to schedule background PDF generation for {sourceFile}: {message}",{sourceFile:this.sourcePath,message:t}),{timeout:p.DH})}this.downloading=!1,this.setBusySate(!1)}else{const o=g("download/{sourceFileId}",{...e,...t});O(o,!1,{always:()=>{this.downloading=!1,this.setBusySate(!1)}})}},async handleSaveToCloud(e,t,o){this.downloading=!0,this.setBusySate(!0);const n=void 0===e&&this.downloadOptions.offline;let s=n?"schedule/filesystem/{sourcePath}/{destinationPath}":"save/{sourcePath}/{destinationPath}";const u=encodeURIComponent(this.sourcePath),h=t||this.cloudDestinationPathName,m={sourcePath:u,destinationPath:encodeURIComponent(h)};e&&(s+="/{cacheFileId}",m.cacheFileId=e),console.info("TEMPLATE",s,m);try{const e=await f.Ay.post(g(s,m),{pageLabels:this.downloadOptions.pageLabels,useTemplate:this.downloadOptions.useTemplate,move:o});if(n)(0,p.Te)((0,w.Tl)(a.J,"Scheduled offline PDF generation to {path}.",{path:e.data.pdfFilePath}));else{const t=e.data.pdfFilePath.substring(6);(0,p.Te)((0,w.Tl)(a.J,"PDF saved as {path}.",{path:t}));const o=function(e,t){const o="/"+(t=t||(0,i.HW)().uid)+"/files";if(e.topLevelFolder!==o)throw new Error(`${e.path} is located outside of the front end user file space ${o}.`);const n={id:e.fileid,source:(0,c.dC)((0,r.join)("dav/files",t,e.relativePath)),root:`/files/${t}`,mime:e.mime,mtime:new Date(1e3*e.lastmod),owner:t,size:e.size,permissions:e.permissions,attributes:{...e,"has-preview":e.hasPreview}};return"file"===e.type?new d.ZH(n):new d.vd(n)}(e.data.fileInfo);console.info("NODE",o),(0,l.Ic)("files:node:created",o)}}catch(e){let t=(0,w.Tl)(a.J,"reason unknown");if(e.response&&e.response.data){const o=e.response.data;Array.isArray(o.messages)&&(t=o.messages.join(" "))}const o=(0,w.Tl)(a.J,"Unable to save the PDF generated from {sourceFile} to the cloud: {message}",{sourceFile:this.sourcePath,message:t});(0,p.Qg)(o,{timeout:p.DH}),console.error(o,e)}this.setBusySate(!1),this.downloading=!1}}};const S=(0,n(4486).A)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"files-tab"},[t("ul",[t("li",{staticClass:"files-tab-entry flex flex-center clickable"},[t("div",{staticClass:"files-tab-entry__avatar icon-play-white",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleDownloadMenu.apply(null,arguments)}}}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleDownloadMenu.apply(null,arguments)}}},[t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(e.t(e.appName,"Generate PDF")))])])]),e._v(" "),t("NcActions",{ref:"downloadActions"},[t("NcActionButton",{attrs:{icon:"icon-download",disabled:e.downloading},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleDownload.apply(null,arguments)}}},[e._v("\n          "+e._s(e.t(e.appName,"download locally"))+"\n        ")]),e._v(" "),t("NcActionButton",{attrs:{"model-value":e.showCloudDestination,disabled:e.showCloudDestination},on:{"update:modelValue":function(t){e.showCloudDestination=t},"update:model-value":function(t){e.showCloudDestination=t},click:function(t){t.preventDefault(),t.stopPropagation(),e.showCloudDestination=!e.showCloudDestination}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CloudUpload",{attrs:{size:16,decorative:"",title:""}})]},proxy:!0}])},[e._v("\n          "+e._s(e.t(e.appName,"save to cloud"))+"\n        ")])],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.showCloudDestination,expression:"showCloudDestination"}],staticClass:"directory-chooser files-tab-entry"},[t("FilePrefixPicker",{attrs:{hint:e.t(e.appName,"Choose a destination in the cloud:"),placeholder:e.t(e.appName,"basename"),readonly:!!e.downloadOptions.useTemplate&&"basename",disabled:e.downloading},on:{update:()=>e.handleSaveToCloud()},model:{value:e.cloudDestinationFileInfo,callback:function(t){e.cloudDestinationFileInfo=t},expression:"cloudDestinationFileInfo"}})],1),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center clickable"},[t("div",{staticClass:"files-tab-entry__avatar icon-settings-white",on:{click:e.toggleOptionsMenu}}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc",on:{click:e.toggleOptionsMenu}},[t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(e.t(e.appName,"Options")))])])]),e._v(" "),t("NcActions",{ref:"downloadOptions"},[t("NcActionCheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltips.pageLabels,expression:"tooltips.pageLabels"}],attrs:{checked:!!e.downloadOptions.pageLabels},on:{"update:checked":t=>e.downloadOptions.pageLabels=t}},[e._v("\n          "+e._s(e.t(e.appName,"page labels"))+"\n        ")]),e._v(" "),t("NcActionCheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltips.useTemplate,expression:"tooltips.useTemplate"}],attrs:{checked:!!e.downloadOptions.useTemplate},on:{"update:checked":t=>e.downloadOptions.useTemplate=t}},[e._v("\n          "+e._s(e.t(e.appName,"filename template"))+"\n        ")]),e._v(" "),t("NcActionCheckbox",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltips.offline,expression:"tooltips.offline"}],attrs:{checked:!!e.downloadOptions.offline},on:{"update:checked":t=>e.downloadOptions.offline=t}},[e._v("\n          "+e._s(e.t(e.appName,"offline"))+"\n        ")])],1)],1),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center clickable"},[t("div",{staticClass:"files-tab-entry__avatar icon-download-white",on:{click:function(t){e.showBackgroundDownloads=!e.showBackgroundDownloads}}}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc",on:{click:function(t){e.showBackgroundDownloads=!e.showBackgroundDownloads}}},[t("h5",[e._v(e._s(e.t(e.appName,"Offline Downloads")))])]),e._v(" "),t("NcActions",[t("NcActionButton",{attrs:{"model-value":e.showBackgroundDownloads,icon:"icon-triangle-"+(e.showBackgroundDownloads?"n":"s")},on:{"update:modelValue":function(t){e.showBackgroundDownloads=t},"update:model-value":function(t){e.showBackgroundDownloads=t},click:function(t){t.preventDefault(),t.stopPropagation(),e.showBackgroundDownloads=!e.showBackgroundDownloads}}})],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.showBackgroundDownloads,expression:"showBackgroundDownloads"}],staticClass:"files-tab-entry"},[e.loading?t("div",{staticClass:"icon-loading-small"}):0===e.downloads.length?t("div",{staticClass:"flex flex-center justify-center"},[t("span",{staticClass:"label"},[e._v("\n          "+e._s(e.t(e.appName,"No Downloads Yet"))+"\n        ")]),e._v(" "),t("NcActions",[t("NcActionButton",{attrs:{icon:"icon-play"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.refreshAvailableDownloads.apply(null,arguments)}}},[e._v("\n            "+e._s(e.t(e.appName,"refresh"))+"\n          ")])],1)],1):t("ul",e._l(e.downloads,(function(o){let{fileid:n,basename:a}=o;return t("li",{key:n,staticClass:"flex flex-center flex-wrap"},[t("a",{staticClass:"download external flex-grow",attrs:{href:e.downloadUrl(n),download:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleCacheFileDownload(n)}}},[e._v("\n            "+e._s(a)+"\n          ")]),e._v(" "),t("NcActions",{staticClass:"flex-no-grow flex-no-shrink"},[t("NcActionButton",{on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleCacheFileSave(n)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CloudUpload",{attrs:{size:16,decorative:"",title:""}})]},proxy:!0}],null,!0)},[e._v("\n              "+e._s(e.t(e.appName,"save to cloud"))+"\n            ")]),e._v(" "),t("NcActionButton",{attrs:{icon:"icon-download",disabled:e.downloading},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleCacheFileDownload(n)}}},[e._v("\n              "+e._s(e.t(e.appName,"download locally"))+"\n            ")]),e._v(" "),t("NcActionButton",{attrs:{icon:"icon-delete",disabled:e.downloading},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleCacheFileDelete(n)}}},[e._v("\n              "+e._s(e.t(e.appName,"delete PDF file"))+"\n            ")])],1)],1)})),0)])])])}),[],!1,null,"4a4d4fa2",null).exports}}]);
//# sourceMappingURL=src_views_FilesTab_vue-cdb0d854a3d443f6d2b2.js.map